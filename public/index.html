<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tapestry — Collaborative Knowledge Curation</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>

  <!-- LOGIN SCREEN -->
  <div id="login-screen">
    <div class="login-card">
      <h1>Tapestry</h1>
      <p class="subtitle">Collaborative knowledge curation</p>

      <label>Your name</label>
      <input type="text" id="login-name" placeholder="Enter your name" autocomplete="off">

      <label>Room</label>
      <div class="room-list" id="room-list">
        <div style="font-size: 13px; color: var(--text-muted); padding: 8px;">Loading rooms...</div>
      </div>

      <span class="create-room-toggle hidden" id="create-room-toggle">+ Create new room</span>
      <div class="create-room-form" id="create-room-form">
        <input type="text" id="new-room-name" placeholder="Room name">

        <label>Attach paper <span style="font-weight: 400; text-transform: none; letter-spacing: 0;">(optional)</span></label>
        <div class="paper-input-group">
          <div class="paper-input-option">
            <input type="file" id="paper-file-input" accept="application/pdf">
          </div>
          <div class="paper-input-divider"><span>or paste text below</span></div>
          <textarea id="paper-text-input" class="paper-text-input" rows="4" placeholder="Paste paper text here..."></textarea>
        </div>

        <label class="extract-checkbox-label">
          <input type="checkbox" id="extract-concepts-checkbox" checked>
          Extract and seed concepts automatically
        </label>

        <div class="create-room-actions">
          <button id="create-room-cancel" class="create-room-cancel-btn">Cancel</button>
          <button id="create-room-btn">Create Room</button>
        </div>

        <div class="create-room-status" id="create-room-status"></div>

        <div class="create-room-progress" id="create-room-progress">
          <div class="progress-steps">
            <div class="progress-step" data-step="create">
              <div class="progress-step-dot"></div>
              <span>Create room</span>
            </div>
            <div class="progress-step-connector"></div>
            <div class="progress-step" data-step="extract">
              <div class="progress-step-dot"></div>
              <span>Extract concepts</span>
            </div>
            <div class="progress-step-connector"></div>
            <div class="progress-step" data-step="review">
              <div class="progress-step-dot"></div>
              <span>Review</span>
            </div>
          </div>
          <div class="progress-bar-track">
            <div class="progress-bar-fill" id="progress-bar-fill"></div>
          </div>
          <div class="progress-status" id="progress-status"></div>
        </div>
      </div>

      <button id="join-btn" disabled>Join Room</button>
    </div>
  </div>

  <!-- ADMIN CONTROL STRIP -->
  <div id="admin-control-strip" class="admin-control-strip hidden">
    <div class="control-item admin-badge">
      <span class="admin-label">Admin</span>
    </div>
    <div class="control-separator"></div>
    <div class="control-item">
      <span class="control-label">Room:</span>
      <select id="room-state-select" class="control-select state-select">
        <option value="normal">normal</option>
        <option value="in-progress">in progress</option>
        <option value="posttest">posttest</option>
        <option value="closed">closed</option>
      </select>
    </div>
    <div class="control-separator"></div>
    <div class="control-item">
      <button id="timer-visibility-btn" class="control-icon-btn" title="Toggle timer visibility for all users">&#9201;</button>
      <input type="number" id="timer-duration-input" class="timer-duration-input" min="0" max="120" placeholder="min" title="Timer duration in minutes (0 to clear)">
      <span class="inline-field-label">min</span>
      <span id="timer-display" class="timer-btn">
        <span id="timer-text">--:--</span>
      </span>
      <button id="timer-play-btn" class="control-icon-btn timer-control-btn" title="Start timer">&#9654;</button>
      <button id="timer-pause-btn" class="control-icon-btn timer-control-btn" title="Pause timer">&#9646;&#9646;</button>
      <button id="timer-reset-btn" class="control-icon-btn timer-control-btn" title="Reset timer">&#8634;</button>
    </div>
    <div class="control-separator"></div>
    <div class="control-item">
      <span class="control-label">ESM:</span>
      <button id="esm-toggle-btn" class="control-btn toggle-btn" data-enabled="false">
        <span class="toggle-indicator"></span>
        <span id="esm-toggle-text">OFF</span>
      </button>
      <span class="inline-field-label" style="margin-left: 6px;">every</span>
      <input type="number" id="esm-cadence-input" class="esm-cadence-input" min="1" max="30" value="3" title="ESM interval in minutes">
      <span class="inline-field-label">min</span>
    </div>
    <div class="control-separator"></div>
    <button id="trigger-posttest-btn" class="control-btn action-btn">Post-Test</button>
    <button id="export-data-btn" class="control-btn action-btn">Export</button>
    <div class="control-separator"></div>
    <div class="control-item user-count-control">
      <span class="control-icon">&#128100;</span>
      <span id="admin-user-count">0</span>
    </div>
  </div>

  <!-- MAIN APP -->
  <div id="app-screen">

    <!-- Chat Panel -->
    <div id="chat-panel">
      <div class="chat-header">
        <h2>Personal Workspace</h2>
        <div class="chat-header-actions">
          <button class="chat-header-btn" id="clear-workspace-btn" title="Clear workspace">Clear</button>
          <button class="leave-room-btn" id="leave-room-btn" title="Back to rooms">&larr; Rooms</button>
        </div>
      </div>
      <div class="chat-toggle" id="chat-toggle" title="Toggle chat">◀</div>

      <div class="chat-messages" id="chat-messages"></div>

      <div class="chat-input-area">
        <div class="chat-input-row">
          <textarea id="chat-input" placeholder="Explore a concept..." rows="1"></textarea>
          <button id="chat-send">Send</button>
          <button id="chat-cancel" class="chat-cancel-btn" style="display: none;">Cancel</button>
        </div>
      </div>
      <div class="chat-resize-handle" id="chat-resize-handle"></div>
    </div>

    <!-- Graph Area -->
    <div id="graph-area">
      <div class="room-bar">
        <div class="room-label" id="room-label">Room</div>
        <div class="room-timer" id="room-timer" style="display: none;">
          <span class="timer-icon">&#9201;</span>
          <span id="room-timer-text">--:--</span>
        </div>
        <div class="user-count" id="user-count">0 users</div>
        <div class="presence-dots" id="presence-dots"></div>
      </div>

      <!-- Room Details Panel -->
      <div class="room-details-panel" id="room-details-panel">
        <div class="room-details-field">
          <label class="harvest-form-label">Room Name</label>
          <input type="text" class="harvest-form-input" id="room-details-name" readonly>
        </div>
        <div class="room-details-field">
          <label class="harvest-form-label">Summary</label>
          <textarea class="harvest-form-textarea" id="room-details-summary" rows="3" maxlength="500" readonly
            placeholder="No summary set"></textarea>
        </div>
        <div class="room-details-actions hidden" id="room-details-actions">
          <button class="room-details-btn cancel" id="room-details-cancel">Cancel</button>
          <button class="room-details-btn save" id="room-details-save">Save</button>
        </div>
      </div>

      <div class="graph-toolbar">
        <div class="graph-search-container" id="graph-search-container">
          <span class="graph-search-icon">&#128269;</span>
          <input type="text" class="graph-search-input" id="graph-search-input"
                 placeholder="Search concepts..." />
          <button class="graph-search-clear" id="graph-search-clear" title="Clear search">&#10005;</button>
        </div>
        <button id="btn-fit-view" title="Fit view">⊞ Fit view</button>
        <button id="btn-auto-layout" title="Auto layout">⊟ Auto layout</button>
        <button id="btn-export-svg" title="Export as SVG">⤓ Export SVG</button>
      </div>

      <svg id="graph-svg"></svg>

      <div class="connection-mode-banner" id="connection-banner">
        <span>Click a second node to connect</span>
        <span class="cancel-connect" id="cancel-connect">Cancel</span>
      </div>

      <div class="merge-mode-banner" id="merge-banner">
        <span>Click a second node to merge into</span>
        <span class="cancel-merge" id="cancel-merge">Cancel</span>
      </div>
    </div>

    <!-- Activity Panel -->
    <div id="activity-panel" class="collapsed">
      <div class="activity-toggle" id="activity-toggle" title="Toggle activity log">☰</div>
      <div class="activity-header">
        <h2>Activity</h2>
      </div>
      <div class="activity-list" id="activity-list"></div>
    </div>

    <!-- PDF Reader Panel -->
    <div id="pdf-panel" class="collapsed no-paper">
      <div class="pdf-panel-toggle" id="pdf-panel-toggle" title="Open paper">&#128196;</div>
      <div class="pdf-panel-header">
        <h2 id="pdf-panel-title">Paper</h2>
        <button class="pdf-panel-close" id="pdf-panel-close" title="Close">&times;</button>
      </div>
      <div class="pdf-panel-content">
        <iframe id="pdf-panel-iframe" src="about:blank"></iframe>
      </div>
    </div>

  </div>

  <!-- Context Menu -->
  <div class="context-menu" id="context-menu">
    <div class="context-menu-item" data-action="explore">
      <span class="cm-icon">&rarr;</span> Explore
    </div>
    <div class="context-menu-item" data-action="expand">
      <span class="cm-icon">↗</span> Expand (show related)
    </div>
    <div class="context-menu-item" data-action="suggest-connections">
      <span class="cm-icon">⚡</span> Suggest connections
    </div>
    <div class="context-menu-item" data-action="edit">
      <span class="cm-icon">&#9998;</span> Edit
    </div>
    <div class="context-menu-item" data-action="connect">
      <span class="cm-icon">⤫</span> Connect to...
    </div>
    <div class="context-menu-item" data-action="merge">
      <span class="cm-icon">⊕</span> Merge with...
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" data-action="upvote">
      <span class="cm-icon">△</span> Upvote
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item danger" data-action="prune">
      <span class="cm-icon">✕</span> Prune
    </div>
  </div>

  <!-- Edge Context Menu -->
  <div class="context-menu" id="edge-context-menu">
    <div class="context-menu-item" data-action="flip-direction">
      <span class="cm-icon">&#8634;</span> <span class="cm-label">Flip direction</span>
    </div>
    <div class="context-menu-item" data-action="toggle-directed">
      <span class="cm-icon">&#8596;</span> <span class="cm-label">Make symmetric</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item danger" data-action="delete-edge">
      <span class="cm-icon">&#10005;</span> <span class="cm-label">Delete connection</span>
    </div>
  </div>

  <!-- Canvas Context Menu -->
  <div class="context-menu" id="canvas-context-menu">
    <div class="context-menu-item" data-action="add-concept">
      <span class="cm-icon">+</span> <span class="cm-label">Add concept</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" data-action="export-svg">
      <span class="cm-icon">⤓</span> <span class="cm-label">Export as SVG</span>
    </div>
  </div>

  <!-- Manual Seed Form (F15) -->
  <div class="manual-seed-form" id="manual-seed-form">
    <input type="text" class="manual-seed-input" id="manual-seed-input"
           placeholder="Concept title..." autocomplete="off">
    <div class="manual-seed-actions">
      <span class="manual-seed-hint" id="manual-seed-hint">Enter to add · Esc to cancel</span>
    </div>
  </div>

  <!-- Feedback Button -->
  <button class="feedback-button" id="feedback-btn" title="Send feedback">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
    </svg>
    Feedback
  </button>

  <!-- Feedback Modal -->
  <div class="modal-overlay" id="feedback-modal">
    <div class="modal-card feedback-modal">
      <h3>Feedback</h3>
      <button class="feedback-close" id="feedback-close">&times;</button>
      <label class="harvest-form-label">Category</label>
      <div class="feedback-categories" id="feedback-categories">
        <label><input type="radio" name="feedback-cat" value="bug"> Bug / something broken</label>
        <label><input type="radio" name="feedback-cat" value="suggestion"> Suggestion / feature idea</label>
        <label><input type="radio" name="feedback-cat" value="confusion"> Confusion / unclear how to...</label>
        <label><input type="radio" name="feedback-cat" value="general" checked> General comment</label>
      </div>
      <label class="harvest-form-label">What happened?</label>
      <textarea class="harvest-form-textarea" id="feedback-text" rows="4" placeholder="Tell us what's on your mind..."></textarea>
      <div class="modal-actions">
        <button id="feedback-submit" class="primary">Submit Feedback</button>
      </div>
    </div>
  </div>

  <!-- Similar Concepts Modal -->
  <div class="modal-overlay" id="similar-modal">
    <div class="modal-card">
      <h3 id="similar-modal-heading">Possible duplicates found</h3>
      <p id="similar-new-concept"></p>
      <div id="similar-list"></div>
      <div class="modal-actions">
        <button id="similar-add-anyway">Add anyway</button>
        <button id="similar-cancel">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Edit Node Modal -->
  <div class="modal-overlay" id="edit-node-modal">
    <div class="modal-card">
      <h3>Edit concept</h3>
      <label class="harvest-form-label">Title</label>
      <input type="text" class="harvest-form-input" id="edit-node-title">
      <div class="edit-node-desc-header">
        <label class="harvest-form-label">Description</label>
        <button class="edit-node-generate-btn" id="edit-node-generate" title="Generate description with AI">&#10024; Generate</button>
      </div>
      <textarea class="harvest-form-textarea" id="edit-node-desc" rows="3"></textarea>
      <div class="modal-actions">
        <button id="edit-node-cancel">Cancel</button>
        <button id="edit-node-save" class="primary">Save</button>
      </div>
    </div>
  </div>

  <!-- Suggest Connections Modal -->
  <div class="modal-overlay" id="connections-modal">
    <div class="modal-card">
      <h3>Suggested connections</h3>
      <p id="connections-concept-name"></p>
      <div id="connections-list"></div>
      <div class="modal-actions">
        <button id="connections-skip">Skip</button>
        <button id="connections-add" class="primary" disabled>Add selected</button>
      </div>
    </div>
  </div>

  <!-- Seed Preview Modal -->
  <div class="modal-overlay" id="seed-preview-modal">
    <div class="modal-card seed-preview-card">
      <h3 id="seed-preview-title">Extracted concepts</h3>
      <p id="seed-preview-subtitle"></p>
      <div class="seed-preview-body" id="seed-preview-body"></div>
      <div class="modal-actions">
        <button id="seed-preview-cancel">Cancel</button>
        <button id="seed-preview-confirm" class="primary">Seed Graph</button>
      </div>
    </div>
  </div>

  <!-- ESM Diary Modal -->
  <div class="modal-overlay esm-overlay" id="esm-modal">
    <div class="modal-card esm-modal">
      <h3 id="esm-header">Quick check-in (1 of 3)</h3>
      <button class="feedback-close" id="esm-close">&times;</button>

      <div class="esm-item">
        <label class="esm-label">I feel engaged with the task right now.</label>
        <div class="esm-likert" data-field="engagement">
          <button data-value="1">1</button>
          <button data-value="2">2</button>
          <button data-value="3">3</button>
          <button data-value="4">4</button>
          <button data-value="5">5</button>
        </div>
        <div class="esm-likert-labels"><span>Strongly disagree</span><span>Strongly agree</span></div>
      </div>

      <div class="esm-item">
        <label class="esm-label">I have a clear picture of what the group has built.</label>
        <div class="esm-likert" data-field="awareness">
          <button data-value="1">1</button>
          <button data-value="2">2</button>
          <button data-value="3">3</button>
          <button data-value="4">4</button>
          <button data-value="5">5</button>
        </div>
        <div class="esm-likert-labels"><span>Strongly disagree</span><span>Strongly agree</span></div>
      </div>

      <div class="esm-item">
        <label class="esm-label">The concepts I'm finding feel relevant.</label>
        <div class="esm-likert" data-field="relevance">
          <button data-value="1">1</button>
          <button data-value="2">2</button>
          <button data-value="3">3</button>
          <button data-value="4">4</button>
          <button data-value="5">5</button>
        </div>
        <div class="esm-likert-labels"><span>Strongly disagree</span><span>Strongly agree</span></div>
      </div>

      <div class="esm-item">
        <label class="esm-label">What are you doing right now?</label>
        <div class="esm-activity" data-field="activity">
          <label><input type="radio" name="esm-activity" value="chatting"> Chatting with the LLM</label>
          <label><input type="radio" name="esm-activity" value="reading-graph"> Reading the graph</label>
          <label><input type="radio" name="esm-activity" value="organizing"> Organizing the graph</label>
          <label><input type="radio" name="esm-activity" value="reading-others"> Reading others' contributions</label>
          <label><input type="radio" name="esm-activity" value="thinking"> Thinking</label>
          <label><input type="radio" name="esm-activity" value="other"> Other</label>
        </div>
      </div>

      <div class="modal-actions">
        <button id="esm-submit" class="primary">Submit</button>
      </div>
    </div>
  </div>

  <!-- Post-Test Survey Modal -->
  <div class="modal-overlay" id="posttest-modal">
    <div class="modal-card posttest-modal-card">
      <a href="#" class="posttest-skip" id="posttest-skip">Skip</a>
      <h3>Post-Session Survey</h3>

      <div class="posttest-section">
        <h4>Section A: Learning &amp; Exploration</h4>
        <div class="posttest-item">
          <label class="posttest-label">A1. Chatting with the LLM helped me understand the topic.</label>
          <div class="posttest-likert" data-field="a1">
            <button data-value="1">1</button><button data-value="2">2</button><button data-value="3">3</button><button data-value="4">4</button><button data-value="5">5</button><button data-value="6">6</button><button data-value="7">7</button>
          </div>
          <div class="posttest-likert-labels"><span>Strongly disagree</span><span>Strongly agree</span></div>
        </div>
        <div class="posttest-item">
          <label class="posttest-label">A2. I explored concepts in depth using follow-up prompts.</label>
          <div class="posttest-likert" data-field="a2">
            <button data-value="1">1</button><button data-value="2">2</button><button data-value="3">3</button><button data-value="4">4</button><button data-value="5">5</button><button data-value="6">6</button><button data-value="7">7</button>
          </div>
          <div class="posttest-likert-labels"><span>Strongly disagree</span><span>Strongly agree</span></div>
        </div>
        <div class="posttest-item">
          <label class="posttest-label">A3. The concepts extracted by the LLM were relevant and useful.</label>
          <div class="posttest-likert" data-field="a3">
            <button data-value="1">1</button><button data-value="2">2</button><button data-value="3">3</button><button data-value="4">4</button><button data-value="5">5</button><button data-value="6">6</button><button data-value="7">7</button>
          </div>
          <div class="posttest-likert-labels"><span>Strongly disagree</span><span>Strongly agree</span></div>
        </div>
      </div>

      <div class="posttest-section">
        <h4>Section B: Collaboration</h4>
        <div class="posttest-item">
          <label class="posttest-label">B1. I was aware of what others were contributing to the graph.</label>
          <div class="posttest-likert" data-field="b1">
            <button data-value="1">1</button><button data-value="2">2</button><button data-value="3">3</button><button data-value="4">4</button><button data-value="5">5</button><button data-value="6">6</button><button data-value="7">7</button>
          </div>
          <div class="posttest-likert-labels"><span>Strongly disagree</span><span>Strongly agree</span></div>
        </div>
        <div class="posttest-item">
          <label class="posttest-label">B2. The shared graph helped me see connections I wouldn't have found alone.</label>
          <div class="posttest-likert" data-field="b2">
            <button data-value="1">1</button><button data-value="2">2</button><button data-value="3">3</button><button data-value="4">4</button><button data-value="5">5</button><button data-value="6">6</button><button data-value="7">7</button>
          </div>
          <div class="posttest-likert-labels"><span>Strongly disagree</span><span>Strongly agree</span></div>
        </div>
        <div class="posttest-item">
          <label class="posttest-label">B3. The group produced a better result than I could have alone.</label>
          <div class="posttest-likert" data-field="b3">
            <button data-value="1">1</button><button data-value="2">2</button><button data-value="3">3</button><button data-value="4">4</button><button data-value="5">5</button><button data-value="6">6</button><button data-value="7">7</button>
          </div>
          <div class="posttest-likert-labels"><span>Strongly disagree</span><span>Strongly agree</span></div>
        </div>
      </div>

      <div class="posttest-section">
        <h4>Section C: Usability</h4>
        <div class="posttest-item">
          <label class="posttest-label">C1. The tool was easy to learn.</label>
          <div class="posttest-likert" data-field="c1">
            <button data-value="1">1</button><button data-value="2">2</button><button data-value="3">3</button><button data-value="4">4</button><button data-value="5">5</button><button data-value="6">6</button><button data-value="7">7</button>
          </div>
          <div class="posttest-likert-labels"><span>Strongly disagree</span><span>Strongly agree</span></div>
        </div>
        <div class="posttest-item">
          <label class="posttest-label">C2. The distinction between personal workspace and shared graph was clear.</label>
          <div class="posttest-likert" data-field="c2">
            <button data-value="1">1</button><button data-value="2">2</button><button data-value="3">3</button><button data-value="4">4</button><button data-value="5">5</button><button data-value="6">6</button><button data-value="7">7</button>
          </div>
          <div class="posttest-likert-labels"><span>Strongly disagree</span><span>Strongly agree</span></div>
        </div>
        <div class="posttest-item">
          <label class="posttest-label">C3. I understood how to harvest concepts to the shared graph.</label>
          <div class="posttest-likert" data-field="c3">
            <button data-value="1">1</button><button data-value="2">2</button><button data-value="3">3</button><button data-value="4">4</button><button data-value="5">5</button><button data-value="6">6</button><button data-value="7">7</button>
          </div>
          <div class="posttest-likert-labels"><span>Strongly disagree</span><span>Strongly agree</span></div>
        </div>
        <div class="posttest-item">
          <label class="posttest-label">C4. The graph layout made it easy to see the structure of the topic.</label>
          <div class="posttest-likert" data-field="c4">
            <button data-value="1">1</button><button data-value="2">2</button><button data-value="3">3</button><button data-value="4">4</button><button data-value="5">5</button><button data-value="6">6</button><button data-value="7">7</button>
          </div>
          <div class="posttest-likert-labels"><span>Strongly disagree</span><span>Strongly agree</span></div>
        </div>
      </div>

      <div class="posttest-section">
        <h4>Section D: Open-Ended</h4>
        <div class="posttest-item">
          <label class="posttest-label">D1. Most useful feature?</label>
          <textarea class="posttest-textarea" data-field="d1" rows="2" placeholder="1–2 sentences"></textarea>
        </div>
        <div class="posttest-item">
          <label class="posttest-label">D2. Most confusing or frustrating aspect?</label>
          <textarea class="posttest-textarea" data-field="d2" rows="2" placeholder="1–2 sentences"></textarea>
        </div>
        <div class="posttest-item">
          <label class="posttest-label">D3. One thing you'd change?</label>
          <textarea class="posttest-textarea" data-field="d3" rows="2" placeholder="1–2 sentences"></textarea>
        </div>
      </div>

      <div class="modal-actions">
        <button id="posttest-submit" class="primary">Submit</button>
      </div>
    </div>
  </div>

  <!-- Concept Tooltip (F3) -->
  <div class="concept-tooltip" id="concept-tooltip">
    <strong class="concept-tooltip-title"></strong>
    <p class="concept-tooltip-desc"></p>
    <div class="concept-tooltip-actions">
      <button class="concept-tooltip-btn harvest" id="tooltip-harvest-btn">+ Harvest</button>
      <button class="concept-tooltip-btn explore" id="tooltip-explore-btn">→ Explore</button>
    </div>
  </div>

  <!-- Harvest Inline Form (F6) -->
  <div class="harvest-inline-form" id="harvest-inline-form">
    <label class="harvest-form-label">Title</label>
    <input type="text" class="harvest-form-input" id="harvest-form-title">
    <label class="harvest-form-label">Description</label>
    <textarea class="harvest-form-textarea" id="harvest-form-desc" rows="2"></textarea>
    <div class="harvest-form-actions">
      <button class="harvest-form-btn cancel" id="harvest-form-cancel">Cancel</button>
      <button class="harvest-form-btn submit" id="harvest-form-submit">Add to Graph →</button>
    </div>
  </div>

  <!-- Selection Toolbar (F5) -->
  <div class="selection-toolbar" id="selection-toolbar">
    <button class="selection-toolbar-btn harvest" id="selection-harvest-btn">+ Harvest</button>
    <button class="selection-toolbar-btn explore" id="selection-explore-btn">→ Explore</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.9.0/d3.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/graph.js"></script>
  <script src="/js/app.js"></script>
</body>
</html>
